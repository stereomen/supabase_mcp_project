-- tide_weather_region 테이블에 컬럼 추가 및 데이터 삽입

-- 1. 기존 테이블에 새 컬럼들 추가
ALTER TABLE public.tide_weather_region 
ADD COLUMN IF NOT EXISTS marine_reg_id text,
ADD COLUMN IF NOT EXISTS marine_reg_sp text,
ADD COLUMN IF NOT EXISTS marine_reg_name text,
ADD COLUMN IF NOT EXISTS temper_reg_id text,
ADD COLUMN IF NOT EXISTS temper_reg_sp text,
ADD COLUMN IF NOT EXISTS temper_reg_name text,
ADD COLUMN IF NOT EXISTS division text;

-- 2. 기존 데이터 삭제 (새로운 구조로 다시 삽입하기 위해)
DELETE FROM public.tide_weather_region;

-- 3. 새로운 데이터 삽입 (CSV 데이터 기반)
INSERT INTO public.tide_weather_region (
    code, name, nx, ny, 
    marine_reg_id, marine_reg_sp, marine_reg_name,
    temper_reg_id, temper_reg_sp, temper_reg_name, division
) VALUES 
('SO_0326', '미조항', 0, 0, '12B20000', 'I', '남해동부', '11H20405', 'C', '남해', '경상남도'),
('SO_0536', '덕적도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('SO_0537', '벽파진', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('SO_0538', '안마도', 0, 0, '12A30000', 'I', '서해남부', '21F20102', 'C', '영광', '서남해안'),
('SO_0539', '강화외포', 0, 0, '12A10000', 'I', '서해북부', '11B20101', 'C', '강화', '수도권'),
('SO_0540', '호산항', 0, 0, '12C20000', 'I', '동해중부', '11D20602', 'C', '삼척', '강원영동'),
('SO_0543', '서거차도', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('SO_0547', '말도', 0, 0, '12A20000', 'I', '서해중부', '21F10501', 'C', '군산', '서남해안'),
('SO_0548', '우이도', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0550', '나로도', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('SO_0551', '여서도', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('SO_0552', '고현항', 0, 0, '12B20000', 'I', '남해동부', '11H20403', 'C', '거제', '경상남도'),
('SO_0553', '해운대', 0, 0, '12B20000', 'I', '남해동부', '11H20201', 'C', '부산', '경상남도'),
('SO_0554', '영종왕산', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('SO_0555', '서망항', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('SO_0562', '승봉도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('SO_0563', '울도', 0, 0, '12A10000', 'I', '서해북부', '11B10101', 'C', '서울', '수도권'),
('SO_0564', '국화도', 0, 0, '12A10000', 'I', '서해북부', '11C20103', 'C', '당진', '충청남도'),
('SO_0565', '향화도항', 0, 0, '12A30000', 'I', '서해남부', '21F20102', 'C', '영광', '서남해안'),
('SO_0566', '송공항', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0567', '쉬미항', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('SO_0568', '백야도', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('SO_0569', '남포항', 0, 0, '12B20000', 'I', '남해동부', '11H10201', 'C', '포항', '경상북도'),
('SO_0570', '광암항', 0, 0, '12B20000', 'I', '남해동부', '11H20301', 'C', '창원', '경상남도'),
('SO_0571', '거제외포', 0, 0, '12B20000', 'I', '남해동부', '11H20403', 'C', '거제', '경상남도'),
('SO_0572', '읍천항', 0, 0, '12B20000', 'I', '남해동부', '11H10202', 'C', '경주', '경상북도'),
('SO_0573', '양포항', 0, 0, '12B20000', 'I', '남해동부', '11H10201', 'C', '포항', '경상북도'),
('SO_0574', '백사장항', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('SO_0576', '화봉리', 0, 0, '12A30000', 'I', '서해남부', '11F20302', 'C', '해남', '전라남도'),
('SO_0577', '가거도', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0578', '소매물도', 0, 0, '12B20000', 'I', '남해동부', '11H20401', 'C', '통영', '경상남도'),
('SO_0581', '강양항', 0, 0, '12B20000', 'I', '남해동부', '11H20101', 'C', '울산', '경상남도'),
('SO_0631', '암태도', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0699', '천리포항', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('SO_0701', '홍도항', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0702', '진도옥도', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('SO_0703', '땅끝항', 0, 0, '12A30000', 'I', '서해남부', '11F20302', 'C', '해남', '전라남도'),
('SO_0704', '소안항', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('SO_0705', '마량항', 0, 0, '12A30000', 'I', '서해남부', '11F20303', 'C', '강진', '전라남도'),
('SO_0706', '청산도', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('SO_0707', '시산항', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('SO_0708', '안도항', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('SO_0709', '두문포', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('SO_0710', '봉우항', 0, 0, '12B10000', 'I', '남해서부', '11H20405', 'C', '남해', '경상남도'),
('SO_0711', '창선도', 0, 0, '12B20000', 'I', '남해동부', '11H20405', 'C', '남해', '경상남도'),
('SO_0712', '능양항', 0, 0, '12B20000', 'I', '남해동부', '11H20401', 'C', '통영', '경상남도'),
('SO_0731', '대진항', 0, 0, '12C20000', 'I', '동해중부', '11D20402', 'C', '고성', '강원영동'),
('SO_0732', '남애항', 0, 0, '12C20000', 'I', '동해중부', '11D20403', 'C', '양양', '강원영동'),
('SO_0733', '강릉항', 0, 0, '12C20000', 'I', '동해중부', '11D20501', 'C', '강릉', '강원영동'),
('SO_0734', '궁촌항', 0, 0, '12C20000', 'I', '동해중부', '11D20602', 'C', '삼척', '강원영동'),
('SO_0735', '죽변항', 0, 0, '12C20000', 'I', '동해중부', '11H10101', 'C', '울진', '경상북도'),
('SO_0736', '축산항', 0, 0, '12C10000', 'I', '동해남부', '11H10102', 'C', '영덕', '경상북도'),
('SO_0737', '강구항', 0, 0, '12C10000', 'I', '동해남부', '11H10102', 'C', '영덕', '경상북도'),
('SO_0738', '여호항', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('SO_0739', '도장항', 0, 0, '12B10000', 'I', '남해서부', '11F20301', 'C', '완도', '전라남도'),
('SO_0740', '보옥항', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('SO_0752', '검산항', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0753', '하의도웅곡', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('SO_0754', '평호리', 0, 0, '12A30000', 'I', '서해남부', '11F20302', 'C', '해남', '전라남도'),
('SO_0755', '원동항', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('SO_0756', '사초항', 0, 0, '12A30000', 'I', '서해남부', '11F20303', 'C', '강진', '전라남도'),
('SO_0757', '안남리', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('SO_0758', '달천도', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('SO_0759', '장문리', 0, 0, '12B20000', 'I', '남해동부', '11H20401', 'C', '통영', '경상남도'),
('SO_0760', '오산항', 0, 0, '12C10000', 'I', '동해남부', '11H10101', 'C', '울진', '경상북도'),
('SO_0761', '녹동항', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('DT_0001', '인천', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0002', '평택', 0, 0, '12A20000', 'I', '서해중부', '11B20605', 'C', '평택', '수도권'),
('DT_0003', '영광', 0, 0, '12A30000', 'I', '서해남부', '21F20102', 'C', '영광', '서남해안'),
('DT_0004', '제주', 0, 0, '12B10500', 'I', '제주도해상', '11G00201', 'C', '제주', '제주도'),
('DT_0005', '부산', 0, 0, '12B20000', 'I', '남해동부', '11H20201', 'C', '부산', '경상남도'),
('DT_0006', '묵호', 0, 0, '12C20000', 'I', '동해중부', '11D20601', 'C', '동해', '강원영동'),
('DT_0007', '목포', 0, 0, '12A30000', 'I', '서해남부', '21F20801', 'C', '목포', '서남해안'),
('DT_0008', '안산', 0, 0, '12A10000', 'I', '서해북부', '11B20203', 'C', '안산', '수도권'),
('DT_0009', '포항', 0, 0, '12C10000', 'I', '동해남부', '11H10201', 'C', '포항', '경상북도'),
('DT_0010', '서귀포', 0, 0, '12B10000', 'I', '남해서부', '11G00401', 'C', '서귀포', '제주도'),
('DT_0011', '후포', 0, 0, '12C10000', 'I', '동해남부', '11H10101', 'C', '울진', '경상북도'),
('DT_0012', '속초', 0, 0, '12C20000', 'I', '동해중부', '11D20401', 'C', '속초', '강원영동'),
('DT_0013', '울릉도', 0, 0, '12C20000', 'I', '동해중부', '11E00101', 'C', '울릉도', '울릉도·독도'),
('DT_0014', '통영', 0, 0, '12B20000', 'I', '남해동부', '11H20401', 'C', '통영', '경상남도'),
('DT_0015', '마산', 0, 0, '12B20000', 'I', '남해동부', '11H20301', 'C', '창원', '경상남도'),
('DT_0016', '여수', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('DT_0017', '대산', 0, 0, '12A10000', 'I', '서해북부', '11C20101', 'C', '서산', '충청남도'),
('DT_0018', '군산', 0, 0, '12A20000', 'I', '서해중부', '21F10501', 'C', '군산', '서남해안'),
('DT_0019', '가덕도', 0, 0, '12B20000', 'I', '남해동부', '11H20201', 'C', '부산', '경상남도'),
('DT_0020', '울산', 0, 0, '12B20000', 'I', '남해동부', '11H20101', 'C', '울산', '경상남도'),
('DT_0021', '추자도', 0, 0, '12A30000', 'I', '서해남부', '11G00800', 'C', '추자도', '제주도'),
('DT_0022', '성산포', 0, 0, '12B10000', 'I', '남해서부', '11G00101', 'C', '성산', '제주도'),
('DT_0023', '모슬포', 0, 0, '12B10000', 'I', '남해서부', '11G00401', 'C', '서귀포', '제주도'),
('DT_0024', '장항', 0, 0, '12A20000', 'I', '서해중부', '11C20202', 'C', '서천', '충청남도'),
('DT_0025', '보령', 0, 0, '12A20000', 'I', '서해중부', '11C20201', 'C', '보령', '충청남도'),
('DT_0026', '고흥발포', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('DT_0027', '완도', 0, 0, '12A30000', 'I', '서해남부', '11F20301', 'C', '완도', '전라남도'),
('DT_0028', '진도', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('DT_0029', '거제도', 0, 0, '12B20000', 'I', '남해동부', '11H20403', 'C', '거제', '경상남도'),
('DT_0030', '위도', 0, 0, '12A20000', 'I', '서해중부', '21F10602', 'C', '위도', '서남해안'),
('DT_0031', '거문도', 0, 0, '12B10000', 'I', '남해서부', '11F20401', 'C', '여수', '전라남도'),
('DT_0032', '강화대교', 0, 0, '12A10000', 'I', '서해북부', '11B20101', 'C', '강화', '수도권'),
('DT_0034', '안흥', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('DT_0035', '흑산도', 0, 0, '12A30000', 'I', '서해남부', '21F20803', 'C', '신안', '서남해안'),
('DT_0036', '대청도', 0, 0, '12A10000', 'I', '서해북부', '11A00101', 'C', '백령도', '백령도'),
('DT_0037', '어청도', 0, 0, '12A20000', 'I', '서해중부', '21F10501', 'C', '군산', '서남해안'),
('DT_0038', '굴업도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0039', '왕돌초', 0, 0, '12C10000', 'I', '동해남부', '11H10101', 'C', '울진', '경상북도'),
('DT_0040', '독도', 0, 0, '12C20000', 'I', '동해중부', '11E00102', 'C', '독도', '울릉도·독도'),
('DT_0041', '복사초', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안'),
('DT_0042', '교본초', 0, 0, '12B20000', 'I', '남해동부', '11H20401', 'C', '통영', '경상남도'),
('DT_0043', '영흥도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0044', '영종대교', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0045', '격렬비열도', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('DT_0046', '쌍정초', 0, 0, '12C20000', 'I', '동해중부', '11E00101', 'C', '울릉도', '울릉도·독도'),
('DT_0047', '도농탄', 0, 0, '12B10000', 'I', '남해서부', '11G00401', 'C', '서귀포', '제주도'),
('DT_0048', '속초등표', 0, 0, '12C20000', 'I', '동해중부', '11D20401', 'C', '속초', '강원영동'),
('DT_0049', '광양', 0, 0, '12B10000', 'I', '남해서부', '11F20402', 'C', '광양', '전라남도'),
('DT_0050', '태안', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('DT_0051', '서천마량', 0, 0, '12A20000', 'I', '서해중부', '11C20202', 'C', '서천', '충청남도'),
('DT_0052', '인천송도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0054', '진해', 0, 0, '12B20000', 'I', '남해동부', '11H20301', 'C', '창원', '경상남도'),
('DT_0056', '부산항신항', 0, 0, '12B20000', 'I', '남해동부', '11H20201', 'C', '부산', '경상남도'),
('DT_0057', '동해항', 0, 0, '12C10000', 'I', '동해남부', '11D20601', 'C', '동해', '강원영동'),
('DT_0058', '경인항', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0059', '백령도', 0, 0, '12A10000', 'I', '서해북부', '11A00101', 'C', '백령도', '백령도'),
('DT_0060', '연평도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0061', '삼천포', 0, 0, '12B20000', 'I', '남해동부', '11H20402', 'C', '사천', '경상남도'),
('DT_0062', '마산', 0, 0, '12B20000', 'I', '남해동부', '11H20301', 'C', '창원', '경상남도'),
('DT_0063', '가덕도', 0, 0, '12B20000', 'I', '남해동부', '11H20201', 'C', '부산', '경상남도'),
('DT_0064', '교동대교', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0065', '덕적도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0067', '안흥', 0, 0, '12A20000', 'I', '서해중부', '11C20102', 'C', '태안', '충청남도'),
('DT_0068', '위도', 0, 0, '12A20000', 'I', '서해중부', '21F10602', 'C', '부안', '서남해안'),
('DT_0091', '포항', 0, 0, '12C10000', 'I', '동해남부', '11H10201', 'C', '포항', '경상북도'),
('DT_0092', '여호항', 0, 0, '12B10000', 'I', '남해서부', '11F20403', 'C', '고흥', '전라남도'),
('DT_0093', '소무의도', 0, 0, '12A10000', 'I', '서해북부', '11B20201', 'C', '인천', '수도권'),
('DT_0094', '서거차도', 0, 0, '12A30000', 'I', '서해남부', '21F20201', 'C', '진도', '서남해안');

-- 4. 테이블 구조 확인
SELECT 
    column_name, 
    data_type, 
    is_nullable 
FROM information_schema.columns 
WHERE table_name = 'tide_weather_region' 
    AND table_schema = 'public'
ORDER BY ordinal_position;

-- 5. 삽입된 데이터 확인
SELECT 
    COUNT(*) as total_records,
    COUNT(DISTINCT marine_reg_id) as unique_marine_regions,
    COUNT(DISTINCT temper_reg_id) as unique_temper_regions,
    COUNT(DISTINCT division) as unique_divisions
FROM public.tide_weather_region;

-- 6. 지역구분별 데이터 분포 확인
SELECT 
    division,
    COUNT(*) as count
FROM public.tide_weather_region
WHERE division IS NOT NULL AND division != ''
GROUP BY division
ORDER BY count DESC;