# API 응답에서 제거할 필드 목록

> 작성일: 2025-12-31
> 목적: 미사용 필드 제거를 통한 API 응답 최적화
> 대상: 서버 개발팀

---

## 제거 대상 필드 요약

| 데이터 모델 | 제거 필드 수 | 비고 |
|------------|-------------|------|
| **WeatherForecast** | 11개 | 단기 날씨 예보 |
| **SupabaseTideData** | 7개 | 조석 데이터 |
| **MarineObservationA** | 0개 | 모두 사용 중 |
| **MarineObservationB** | 0개 | 모두 사용 중 |
| **TemperatureForecast** | 11개 | 중기 기온예보 |
| **MarineForecast** | 14개 | 중기 해상예보 |
| **OpenWeatherMapForecast** | 18개 | OpenWeatherMap 예보 |
| **WeatherApiHourly** | 0개 | 현재 미사용, 향후 활용 예정 |
| **Ad** | 0개 | 모두 사용 중 |

**전체 제거 필드**: **61개**

---

## 1. WeatherForecast (단기 날씨 예보)

### 제거할 필드: 11개

```json
// ❌ 제거 필드
{
  "nx": 60,                    // 격자 X 좌표 (내부 데이터)
  "ny": 127,                   // 격자 Y 좌표 (내부 데이터)
  "regionName": "인천",         // ObdList에서 관리 (중복)
  "updatedAtKr": "...",        // 업데이트 시각 (UI 미표시)
  "baseDate": "20251231",      // 기준 날짜 (내부 데이터)
  "baseTime": "0500",          // 기준 시각 (내부 데이터)
  "forecastDatetime": "...",   // UTC 시간 (forecastDatetimeKr 사용)
  "uuu": 2.5,                  // 풍속 동서성분 (vec, wsd로 대체)
  "vvv": 1.8,                  // 풍속 남북성분 (vec, wsd로 대체)
  "wav": 0.5,                  // 파고 (해상관측 데이터로 대체)
  "updatedAt": "...",          // UTC 업데이트 시각 (UI 미표시)
  "locationCode": "DT_0001"    // 요청 파라미터와 중복
}
```

### 유지할 필드: 12개

```json
// ✅ 유지 필드
{
  "한글지역명": "인천",           // 표시용
  "fcst_datetime_kr": "...",   // 예보 일시 (필수)
  "pop": 30,                   // 강수확률 (필수)
  "pty": 0,                    // 강수형태 (필수)
  "sky": 3,                    // 하늘상태 (필수)
  "tmp": 5,                    // 기온 (필수)
  "vec": 270,                  // 풍향 (필수)
  "wsd": 3.5,                  // 풍속 (필수)
  "pcp": "강수없음",           // 강수량 (향후 사용)
  "reh": 65,                   // 습도 (향후 사용)
  "sno": "적설없음",           // 적설량 (향후 사용)
  "tmn": 2,                    // 최저기온 (향후 사용)
  "tmx": 8                     // 최고기온 (향후 사용)
}
```

---

## 2. SupabaseTideData (조석 데이터)

### 제거할 필드: 7개

```json
// ❌ 제거 필드
{
  "obs_post_name": "인천",      // ObdList에서 관리 (중복)
  "location_code": "DT_0001",  // 요청 파라미터와 중복
  "location_name": "인천",      // ObdList에서 관리 (중복)
  "obs_lon": 126.7052,         // ObdList에서 관리 (중복)
  "obs_lat": 37.4563,          // ObdList에서 관리 (중복)
  "updated_at": "...",         // UTC 업데이트 시각 (UI 미표시)
  "updated_at_kr": "...",      // KST 업데이트 시각 (UI 미표시)
  "id": 12345                  // DB 내부 ID
}
```

### 유지할 필드: 10개

```json
// ✅ 유지 필드
{
  "obs_date": "2025-12-31",        // 조석 날짜 (필수)
  "lvl1": "02:10/low/저/85",       // 1차 물때 (필수)
  "lvl2": "08:45/high/고/532",     // 2차 물때 (필수)
  "lvl3": "14:30/low/저/92",       // 3차 물때 (필수)
  "lvl4": "21:15/high/고/528",     // 4차 물때 (필수)
  "date_sun": "07:45/17:30",       // 일출/일몰 (향후 사용)
  "date_moon": "18:20/08:15",      // 월출/월몰 (향후 사용)
  "mool_normal": "한물",           // 일반 물때 (필수)
  "mool7": "7물",                  // 7물때 (필수)
  "mool8": "8물"                   // 8물때 (필수)
}
```

---

## 3. MarineObservations (해상 관측)

### MarineObservationA: 제거 필드 없음

```json
// ✅ 모두 유지 (4개 필드)
{
  "station_id": "DT_0001",              // 관측소 코드 (내부 처리)
  "observation_time_kst": "202512...", // 관측 시각 (필수)
  "water_temperature": 8.5,             // 수온 (필수)
  "significant_wave_height": 0.8        // 파고 (필수)
}
```

### MarineObservationB: 제거 필드 없음

```json
// ✅ 모두 유지 (5개 필드)
{
  "station_id": "DT_0001",              // 관측소 코드 (내부 처리)
  "observation_time_kst": "202512...", // 관측 시각 (필수)
  "air_temperature": 5.2,               // 기온 (필수)
  "wind_direction": 270,                // 풍향 (필수)
  "wind_speed": 3.5                     // 풍속 (필수)
}
```

---

## 4. TemperatureForecast (중기 기온예보)

### 제거할 필드: 11개

```json
// ❌ 제거 필드
{
  "reg_id": "11B00000",        // 지역 ID (내부 데이터)
  "reg_sp": "서해중부",        // 지역 구분 (내부 데이터)
  "reg_name": "인천",          // 지역명 (내부 데이터)
  "mod": "A02",                // 모델 구분 (내부 데이터)
  "tm_fc": "...",              // 발표시각 UTC (UI 미표시)
  "tm_fc_kr": "...",           // 발표시각 KST (UI 미표시)
  "tm_ef": "...",              // 예보시각 UTC (tm_ef_kr 사용)
  "c": "3",                    // 일자 구분 코드 (내부 데이터)
  "conf": "보통",              // 신뢰도 (UI 미표시)
  "rn_st": 0,                  // 강수상태 코드 (UI 미표시)
  "forecast_type": "temper"    // 예보 타입 (내부 데이터)
}
```

### 유지할 필드: 9개

```json
// ✅ 유지 필드
{
  "tm_ef_kr": "2026-01-03T00:00:00+09:00", // 예보 일시 (필수)
  "min_temp": -2,                           // 최저기온 (필수)
  "max_temp": 8,                            // 최고기온 (필수)
  "min_temp_l": -4,                         // 최저기온 하한 (향후 사용)
  "min_temp_h": 0,                          // 최저기온 상한 (향후 사용)
  "max_temp_l": 6,                          // 최고기온 하한 (향후 사용)
  "max_temp_h": 10,                         // 최고기온 상한 (향후 사용)
  "sky": "맑음",                            // 하늘상태 (향후 사용)
  "pre": "20",                              // 강수확률 (향후 사용)
  "wf": "구름많음"                          // 날씨 예보 (향후 사용)
}
```

---

## 5. MarineForecast (중기 해상예보)

### 제거할 필드: 14개

```json
// ❌ 제거 필드
{
  "reg_id": "11B00000",        // 지역 ID (내부 데이터)
  "reg_sp": "서해중부",        // 지역 구분 (내부 데이터)
  "reg_name": "인천",          // 지역명 (내부 데이터)
  "mod": "A02",                // 모델 구분 (내부 데이터)
  "tm_fc": "...",              // 발표시각 UTC (UI 미표시)
  "tm_fc_kr": "...",           // 발표시각 KST (UI 미표시)
  "tm_ef": "...",              // 예보시각 UTC (tm_ef_kr 사용)
  "sky": "1",                  // 하늘상태 코드 (현재 미사용)
  "pre": "2",                  // 강수 코드 (현재 미사용)
  "conf": "보통",              // 신뢰도 (UI 미표시)
  "rn_st": 0,                  // 강수상태 (UI 미표시)
  "forecast_type": "marine"    // 예보 타입 (내부 데이터)
}
```

### 유지할 필드: 4개

```json
// ✅ 유지 필드
{
  "tm_ef_kr": "2026-01-03T00:00:00+09:00", // 예보 일시 (필수)
  "wh_a": 0.5,                              // 파고 범위 시작값 (향후 사용)
  "wh_b": 1.5,                              // 파고 범위 끝값 (향후 사용)
  "wf": "서해중부앞바다의 물결은 0.5~1.5m로 일겠습니다." // 날씨 예보 (향후 사용)
}
```

---

## 6. OpenWeatherMapForecast (OpenWeatherMap 예보)

### 제거할 필드: 18개

```json
// ❌ 제거 필드
{
  "observation_time_utc": "...",    // UTC 관측시각 (UI 미표시)
  "observation_time_local": "...",  // Local 관측시각 (UI 미표시)
  "timezone_offset": 32400,         // 타임존 오프셋 (내부 데이터)
  "weather_id": 800,                // 날씨 ID (weather_icon으로 대체)
  "feels_like": 4.2,                // 체감온도 (UI 미사용)
  "pressure": 1013,                 // 기압 (UI 미사용)
  "sea_level": 1013,                // 해면 기압 (UI 미사용)
  "ground_level": 1010,             // 지면 기압 (UI 미사용)
  "wind_gust": 5.5,                 // 돌풍 (UI 미사용)
  "clouds": 20,                     // 구름량 (UI 미사용)
  "visibility": 10000,              // 가시거리 (UI 미사용)
  "rain_1h": 0.5,                   // 1시간 강우량 (UI 미사용)
  "rain_3h": 1.2,                   // 3시간 강우량 (UI 미사용)
  "snow_1h": 0.0,                   // 1시간 적설량 (UI 미사용)
  "snow_3h": 0.0,                   // 3시간 적설량 (UI 미사용)
  "location_country": "KR",         // 국가 코드 (내부 데이터)
  "sunrise": "07:45:00",            // 일출 시각 (dateSun으로 대체)
  "sunset": "17:30:00",             // 일몰 시각 (dateSun으로 대체)
  "data_type": "forecast"           // 데이터 타입 (내부 구분용)
}
```

### 유지할 필드: 13개

```json
// ✅ 유지 필드
{
  "forecast_date": "2026-01-03",       // 예보 날짜 (필수)
  "forecast_time": "00:00:00",         // 예보 시각 (필수)
  "weather_main": "Clear",             // 날씨 주 카테고리 (향후 사용)
  "weather_description": "맑음",       // 날씨 설명 (향후 사용)
  "weather_icon": "01d",               // 날씨 아이콘 (향후 사용)
  "temp": 5.2,                         // 기온 (향후 사용)
  "temp_min": 3.0,                     // 최저기온 (향후 사용, 사용자 지정)
  "temp_max": 7.0,                     // 최고기온 (향후 사용, 사용자 지정)
  "humidity": 65,                      // 습도 (향후 사용)
  "wind_speed": 3.5,                   // 풍속 (향후 사용)
  "wind_deg": 270,                     // 풍향 (향후 사용)
  "pop": 0.2                           // 강수확률 (향후 사용)
}
```

---

## 7. WeatherApiHourly (WeatherAPI.com, 14일 예보)

### 제거 필드 없음

**현재 전체 미사용 상태**, 향후 활성화 예정이므로 모든 필드 유지

```json
// ✅ 모두 유지 (12개 필드, 향후 사용)
{
  "observation_time_local": "2026-01-03 00:00",
  "forecast_date": "2026-01-03",
  "forecast_time": "00:00",
  "condition_text": "Clear",
  "condition_code": 1000,
  "temp_c": 5.2,
  "wind_mph": 7.8,
  "wind_kph": 12.6,
  "wind_degree": 270,
  "wind_direction": "W",
  "gust_mph": 10.5,
  "gust_kph": 16.9
}
```

---

## 8. Ad (광고 데이터)

### 제거 필드 없음

모든 필드가 사용 중입니다.

```json
// ✅ 모두 유지 (14개 필드)
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "partner_id": "partner_001",
  "partner_name": "바다낚시 전문점",
  "campaign_name": "겨울 낚시 장비 할인",
  "matched_station_id": ["DT_0001"],
  "matched_area": "서해중부",
  "ad_type_a": "banner",
  "ad_type_b": null,
  "image_a_url": "https://example.com/banner.jpg",
  "image_b_url": null,
  "landing_url": "https://example.com/promotion",
  "priority": 1,
  "business_type": "fishing_equipment",
  "business_level": 2
}
```

---

## 제거 필드 체크리스트

### WeatherForecast (11개)
- [ ] `nx`
- [ ] `ny`
- [ ] `regionName` (또는 `한글지역명`은 유지)
- [ ] `updatedAtKr` (또는 `updated_at_kr`)
- [ ] `baseDate` (또는 `base_date`)
- [ ] `baseTime` (또는 `base_time`)
- [ ] `forecastDatetime` (또는 `fcst_datetime`)
- [ ] `uuu`
- [ ] `vvv`
- [ ] `wav`
- [ ] `updatedAt` (또는 `updated_at`)
- [ ] `locationCode` (또는 `location_code`)

### SupabaseTideData (7개)
- [ ] `obs_post_name` (또는 `obsPostName`)
- [ ] `location_code` (또는 `locationCode`)
- [ ] `location_name` (또는 `locationName`)
- [ ] `obs_lon` (또는 `obsLon`)
- [ ] `obs_lat` (또는 `obsLat`)
- [ ] `updated_at`
- [ ] `updated_at_kr`
- [ ] `id`

### TemperatureForecast (11개)
- [ ] `reg_id` (또는 `regId`)
- [ ] `reg_sp` (또는 `regSp`)
- [ ] `reg_name` (또는 `regName`)
- [ ] `mod`
- [ ] `tm_fc` (또는 `tmFc`)
- [ ] `tm_fc_kr` (또는 `tmFcKr`)
- [ ] `tm_ef` (또는 `tmEf`)
- [ ] `c`
- [ ] `conf`
- [ ] `rn_st` (또는 `rnSt`)
- [ ] `forecast_type` (또는 `forecastType`)

### MarineForecast (14개)
- [ ] `reg_id` (또는 `regId`)
- [ ] `reg_sp` (또는 `regSp`)
- [ ] `reg_name` (또는 `regName`)
- [ ] `mod`
- [ ] `tm_fc` (또는 `tmFc`)
- [ ] `tm_fc_kr` (또는 `tmFcKr`)
- [ ] `tm_ef` (또는 `tmEf`)
- [ ] `sky`
- [ ] `pre`
- [ ] `conf`
- [ ] `rn_st` (또는 `rnSt`)
- [ ] `forecast_type` (또는 `forecastType`)

### OpenWeatherMapForecast (18개)
- [ ] `observation_time_utc` (또는 `observationTimeUtc`)
- [ ] `observation_time_local` (또는 `observationTimeLocal`)
- [ ] `timezone_offset` (또는 `timezoneOffset`)
- [ ] `weather_id` (또는 `weatherId`)
- [ ] `feels_like` (또는 `feelsLike`)
- [ ] `pressure`
- [ ] `sea_level` (또는 `seaLevel`)
- [ ] `ground_level` (또는 `groundLevel`)
- [ ] `wind_gust` (또는 `windGust`)
- [ ] `clouds`
- [ ] `visibility`
- [ ] `rain_1h` (또는 `rain1h`)
- [ ] `rain_3h` (또는 `rain3h`)
- [ ] `snow_1h` (또는 `snow1h`)
- [ ] `snow_3h` (또는 `snow3h`)
- [ ] `location_country` (또는 `locationCountry`)
- [ ] `sunrise`
- [ ] `sunset`
- [ ] `data_type` (또는 `dataType`)

---

## 예상 효과

| 항목 | 효과 |
|------|------|
| **JSON 응답 크기** | 약 **40~50% 감소** |
| **네트워크 전송 시간** | 약 **30~40% 단축** |
| **파싱 속도** | 약 **20~30% 향상** |
| **메모리 사용량** | 약 **30~40% 감소** |

---

## 적용 방법

### 옵션 1: 필드 제거 (권장)
```python
# 서버 응답 생성 시 제거할 필드를 exclude
response_data = {
    "weather_forecasts": [
        {k: v for k, v in forecast.items()
         if k not in ['nx', 'ny', 'regionName', ...]}
        for forecast in weather_forecasts
    ],
    ...
}
```

### 옵션 2: 버전 관리
```python
# API 버전별 응답 구조 분리
if api_version == "v2":
    # v2: 최적화된 응답 (제거된 필드)
    return optimized_response
else:
    # v1: 기존 응답 (모든 필드 포함)
    return full_response
```

### 옵션 3: 쿼리 파라미터
```python
# fields 파라미터로 필요한 필드만 요청
GET /api/weather-tide-data?code=DT_0001&fields=optimized

if request.params.get('fields') == 'optimized':
    return optimized_response
else:
    return full_response
```

---

## 주의사항

1. **하위 호환성**: 기존 앱이 업데이트되기 전까지 v1 API 유지 필요
2. **점진적 마이그레이션**: v1과 v2를 동시에 운영하며 점진적 전환
3. **모니터링**: 필드 제거 후 클라이언트 에러 로그 모니터링
4. **문서화**: API 버전별 차이점 문서화

---

## 참고 문서

- [API 데이터 사용 현황 분석](./2025-12-31_API_데이터_사용_현황.md)
- [최적화 API 명세서](./2025-12-31_최적화_API_명세서.md)
- [Seatide 프로젝트 가이드](../CLAUDE.md)

---

**문서 끝**
